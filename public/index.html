<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Student Manager</title>
    <style>
      body {
        font-family: sans-serif;
        max-width: 400px;
        margin: 40px auto;
      }
      input,
      button {
        margin: 5px 0;
        width: 100%;
        padding: 8px;
      }
      li {
        margin: 6px 0;
      }
    </style>
  </head>
  <body>
    <h2>Student Manager</h2>

    <input id="name" placeholder="Full name" />
    <input id="age" type="number" placeholder="Age" />
    <button onclick="addStudent()">Add Student</button>

    <ul id="list"></ul>

    <script>
      const API = "/api/students";

      async function load() {
        const res = await fetch(API);
        const students = await res.json();
        const list = document.getElementById("list");
        list.innerHTML = students
          .map(
            (s) =>
              `<li>${s.fullName} (${s.age}) <button onclick="del(${s.id})">ðŸ—‘</button></li>`
          )
          .join("");
      }

      async function addStudent() {
        const fullName = document.getElementById("name").value.trim();
        const age = document.getElementById("age").value;
        if (!fullName || !age) return alert("Enter all fields");
        await fetch(API, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ fullName, age: Number(age) }),
        });
        document.getElementById("name").value = "";
        document.getElementById("age").value = "";
        load();
      }

      async function del(id) {
        await fetch(`${API}/${id}`, { method: "DELETE" });
        load();
      }

      load();
    </script>
  </body>
</html>
